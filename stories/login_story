Story: User logging in

  As a user
  I want to login with my details
  So that I can get access to the site

  Scenario: User uses right password

    Given a username 'quentin'
    And a password 'test'

    When the above user logs in with username and password

    Then the home page should be shown
    And the user should not see the admin tab in the menu

  Scenario: User uses wrong password

    Given a username 'jdoe'
    And a password 'letmein'

    When the user logs in with username and password

    Then the login form should be shown again

  Scenario: Create a new user

    Given 'admin' is logged in
    And a username 'jdoe'
    And a firstname 'Joe'
    And a lastname 'Doe'
    And a password 'letmein'
    And an email 'jdoe@test.com'
    And an office id '1'
    And a role '23'
    And there is no user with this username

    When the user creates an account with username, password and email

    Then there should be a user named 'jdoe'
    And should redirect to '/users'
